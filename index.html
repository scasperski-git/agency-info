<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Agency Information Submission</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== LAYOUT FIX ===== */
html, body {
  height: 100%;
  margin: 0;
}
.page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
.main {
  flex: 1;
}

/* ===== THEME ===== */
:root {
  --bg: #f4f6f8;
  --card: #ffffff;
  --text: #000;
  --muted: #666;
  --border: #ccc;
  --primary: #1e88e5;
}
body.dark {
  --bg: #121212;
  --card: #1e1e1e;
  --text: #f1f1f1;
  --muted: #aaa;
  --border: #333;
}

body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  padding: 20px;
  color: var(--text);
}

/* ===== CARD ===== */
.container {
  max-width: 420px;
  margin: auto;
  background: var(--card);
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  position: relative;
}

h2 { text-align: center; margin-bottom: 10px; }
label { font-weight: bold; }

input[type="text"],
input[type="tel"] {
  width: 100%;
  padding: 10px;
  margin: 5px 0 15px;
  border: 1px solid var(--border);
  border-radius: 5px;
  background: var(--card);
  color: var(--text);
  text-transform: uppercase;
}

::placeholder {
  text-transform: none;
  color: var(--muted);
}

.consent {
  font-size: 13px;
  margin-bottom: 15px;
  color: var(--muted);
}

/* ===== BUTTON ===== */
button {
  width: 100%;
  padding: 12px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 5px;
  font-size: 16px;
  cursor: not-allowed;
  opacity: 0.6;
}
button.enabled {
  cursor: pointer;
  opacity: 1;
}

/* ===== SUCCESS ===== */
.successIcon {
  margin: 15px auto;
  width: 70px;
}
.successIcon svg {
  width: 100%;
  animation: pop 0.5s ease;
}
@keyframes pop {
  0% { transform: scale(0.3); opacity: 0; }
  80% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

.summary {
  text-align: left;
  font-size: 14px;
  margin-top: 15px;
}
.ref {
  font-weight: bold;
  margin-top: 10px;
}

/* ===== WATERMARK ===== */
.watermark {
  position: absolute;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-25deg);
  font-size: 48px;
  color: rgba(0,0,0,0.08);
  font-weight: bold;
  pointer-events: none;
  display: none;
}

/* ===== DARK MODE TOGGLE (ALIGNED) ===== */
.topbar {
  max-width: 420px;
  margin: auto;
  text-align: right;
  font-size: 12px;
  margin-bottom: 6px;
}

/* ===== FOOTER ===== */
.footer {
  text-align: center;
  font-size: 11px;
  color: var(--muted);
  margin-top: 20px;
}
.divider {
  height: 2px;
  background: linear-gradient(to right, transparent, var(--primary), transparent);
  margin-bottom: 10px;
}
.footer a {
  color: var(--muted);
  text-decoration: none;
}
.privacy {
  font-size: 11px;
  margin-top: 6px;
}
</style>
</head>

<body>
<div class="page">

<div class="topbar">
  ðŸŒ™ Dark Mode
  <input type="checkbox" id="darkToggle" onchange="toggleDark()">
</div>

<div class="main">

<!-- FORM -->
<div class="container" id="formBox">
  <h2>ðŸ“„ AGENCY INFORMATION SUBMISSION</h2>

  <form onsubmit="return submitForm();">

    <label>Agency Name</label>
    <input type="text" id="agency" placeholder="Example: ABC DEBT SDN BHD" required>

    <label>PIC Name 1</label>
    <input type="text" id="pic1" placeholder="Example: MR JOHN DOE" required>

    <label>PIC Name 2 (Optional)</label>
    <input type="text" id="pic2" placeholder="Example: MISS JANE DOE">

    <label>Contact No (Primary)</label>
    <input type="tel" id="contact1" placeholder="Example: 0123456789" required oninput="formatPhone(this)">

    <label>Contact No (Optional)</label>
    <input type="tel" id="contact2" placeholder="Example: 0123456789" oninput="formatPhone(this)">

    <label>WhatsApp No (Mandatory)</label>
    <input type="tel" id="whatsapp" placeholder="Example: 0123456789" required oninput="formatPhone(this)">

    <div class="consent">
      <input type="checkbox" id="consent" onclick="toggleBtn()">
      I confirm that the information provided is accurate and consent to its use
      for official communication purposes.
    </div>

    <button type="submit" id="submitBtn" disabled>Submit</button>
  </form>
</div>

<!-- SUCCESS -->
<div class="container" id="successBox" style="display:none;">
  <div class="watermark" id="watermark">SUBMITTED</div>

  <div class="successIcon">
    <svg viewBox="0 0 24 24" fill="none">
      <circle cx="12" cy="12" r="10" stroke="#1e88e5" stroke-width="2"/>
      <path d="M7 12l3 3 7-7" stroke="#1e88e5" stroke-width="2"/>
    </svg>
  </div>

  <h2 style="text-align:center;">Submission Successful</h2>

  <div class="ref" id="refDisplay"></div>

  <div class="summary" id="summaryBox"></div>

  <div class="consent" style="margin-top:15px;">
    âœ” The agency has confirmed consent for official communication purposes.
  </div>

  <p style="font-size:13px;text-align:center;">
    You may safely close this page.
  </p>
</div>

</div>

<!-- FOOTER -->
<div class="footer">
  <div class="divider"></div>
  <div id="trademark"></div>
  <div class="privacy">
    Information submitted is collected solely for communication and
    administrative record purposes.
  </div>
</div>

</div>

<script>
let IS_SUBMITTED = false;

/* DARK MODE */
function toggleDark() {
  document.body.classList.toggle("dark");
  localStorage.setItem("dark", document.body.classList.contains("dark"));
}
if (localStorage.getItem("dark") === "true") {
  document.body.classList.add("dark");
  darkToggle.checked = true;
}

/* BUTTON */
function toggleBtn() {
  submitBtn.disabled = !consent.checked;
  submitBtn.classList.toggle("enabled", !submitBtn.disabled);
}

/* PHONE */
function formatPhone(el) {
  let v = el.value.replace(/\D/g,'');
  if (v.startsWith("0")) v = "6" + v;
  if (!v.startsWith("6")) v = "6" + v;
  el.value = v;
}

/* REF */
function generateRef() {
  const d = new Date();
  return "AGY-" +
    d.getFullYear() +
    String(d.getMonth()+1).padStart(2,"0") +
    String(d.getDate()).padStart(2,"0") + "-" +
    String(d.getHours()).padStart(2,"0") +
    String(d.getMinutes()).padStart(2,"0") +
    String(d.getSeconds()).padStart(2,"0");
}

/* SUBMIT */
function submitForm() {
  if (IS_SUBMITTED) return false;
  IS_SUBMITTED = true;

  const ref = generateRef();
  const a = agency.value.toUpperCase();
  const p1 = pic1.value.toUpperCase();
  const p2 = pic2.value.toUpperCase();
  const c1 = contact1.value;
  const c2 = contact2.value;
  const w = whatsapp.value;

  fetch("PASTE_YOUR_WEB_APP_URL_HERE", {
    method: "POST",
    body: new URLSearchParams({
      agency: a, pic1: p1, pic2: p2,
      contact1: c1, contact2: c2,
      whatsapp: w, consent: "YES", ref: ref
    })
  });

  formBox.style.display = "none";
  successBox.style.display = "block";
  watermark.style.display = "block";

  refDisplay.innerText = "Reference No: " + ref;
  summaryBox.innerHTML =
    `<div><b>Agency:</b> ${a}</div>
     <div><b>PIC Name 1:</b> ${p1}</div>
     ${p2 ? `<div><b>PIC Name 2:</b> ${p2}</div>` : ""}
     <div><b>Contact (Primary):</b> ${c1}</div>
     ${c2 ? `<div><b>Contact (Optional):</b> ${c2}</div>` : ""}
     <div><b>WhatsApp No:</b> ${w}</div>`;

  return false;
}

/* FOOTER */
(function () {
  const year = new Date().getFullYear();
  trademark.innerHTML =
    `Â© ${year} <a href="https://sczpnet.org" target="_blank">sczpnet.org</a> Â· For Authorized Agency Use`;
})();
</script>

</body>
</html>
