<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Agency Information Submission</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 20px;
}
.container {
  max-width: 420px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h2 {
  text-align: center;
  margin-bottom: 10px;
}
label {
  font-weight: bold;
}

input[type="text"],
input[type="tel"] {
  width: 100%;
  padding: 10px;
  margin: 5px 0 15px;
  border: 1px solid #ccc;
  border-radius: 5px;
  text-transform: uppercase;
}

.consent {
  font-size: 13px;
  margin-bottom: 15px;
}

button {
  width: 100%;
  padding: 12px;
  background: #1e88e5;
  color: white;
  border: none;
  border-radius: 5px;
  font-size: 16px;
  cursor: not-allowed;
  opacity: 0.6;
}
button.enabled {
  cursor: pointer;
  opacity: 1;
}

/* SUCCESS */
.successIcon {
  margin: 15px auto;
  width: 70px;
}
.successIcon svg {
  width: 100%;
  animation: pop 0.5s ease;
}
@keyframes pop {
  0% { transform: scale(0.3); opacity: 0; }
  80% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

.ref {
  font-weight: bold;
  margin-top: 10px;
}

/* TRADEMARK */
.trademark {
  text-align: center;
  font-size: 11px;
  color: #999;
  margin-top: 25px;
}
.trademark a {
  color: #999;
  text-decoration: none;
}
.trademark a:hover {
  text-decoration: underline;
}
</style>
</head>

<body>

<!-- FORM -->
<div class="container" id="formBox">
  <h2>AGENCY INFORMATION SUBMISSION</h2>

  <form onsubmit="return submitForm();">

    <label>Agency Name</label>
    <input type="text" id="agency" required>

    <label>PIC Name 1</label>
    <input type="text" id="pic1" required>

    <label>PIC Name 2</label>
    <input type="text" id="pic2">

    <label>Contact No</label>
    <input type="tel" id="contact" required oninput="formatPhone(this)">

    <label>WhatsApp No</label>
    <input type="tel" id="whatsapp" required oninput="formatPhone(this)">

    <div class="consent">
      <input type="checkbox" id="consent" onclick="toggleBtn()">
      I confirm that the information provided is accurate and consent to its use
      for official communication purposes.
    </div>

    <button type="submit" id="submitBtn" disabled>Submit</button>
  </form>
</div>

<!-- SUCCESS -->
<div class="container" id="successBox" style="display:none;text-align:center;">

  <div class="successIcon">
    <svg viewBox="0 0 24 24" fill="none">
      <circle cx="12" cy="12" r="10" stroke="#1e88e5" stroke-width="2"/>
      <path d="M7 12l3 3 7-7" stroke="#1e88e5" stroke-width="2"/>
    </svg>
  </div>

  <h2>Submission Successful</h2>

  <div class="ref" id="refDisplay"></div>

  <p style="font-size:13px;color:#555;margin-top:10px;">
    Your information has been successfully recorded.<br>
    <b>You may safely close this page.</b>
  </p>
</div>

<!-- TRADEMARK -->
<div class="trademark" id="trademark"></div>

<script>
let IS_SUBMITTED = false;

/* ENABLE BUTTON */
function toggleBtn() {
  const btn = document.getElementById("submitBtn");
  btn.disabled = !document.getElementById("consent").checked;
  btn.classList.toggle("enabled", !btn.disabled);
}

/* PHONE FORMAT – AUTO ADD 6, NO SPACES */
function formatPhone(el) {
  let v = el.value.replace(/\D/g, '');

  if (v.startsWith("0")) {
    v = "6" + v;
  }
  if (!v.startsWith("6")) {
    v = "6" + v;
  }

  el.value = v;
}

/* REF GENERATOR */
function generateRef() {
  const d = new Date();
  return "AGY-" +
    d.getFullYear() +
    String(d.getMonth()+1).padStart(2,"0") +
    String(d.getDate()).padStart(2,"0") + "-" +
    String(d.getHours()).padStart(2,"0") +
    String(d.getMinutes()).padStart(2,"0") +
    String(d.getSeconds()).padStart(2,"0");
}

/* SUBMIT */
function submitForm() {
  if (IS_SUBMITTED) return false;
  IS_SUBMITTED = true;

  const ref = generateRef();

  const data = new URLSearchParams();
  data.append("agency", agency.value.toUpperCase());
  data.append("pic1", pic1.value.toUpperCase());
  data.append("pic2", pic2.value.toUpperCase());
  data.append("contact", contact.value);
  data.append("whatsapp", whatsapp.value);
  data.append("consent", "YES");
  data.append("ref", ref);

  fetch("PASTE_YOUR_WEB_APP_URL_HERE", {
    method: "POST",
    body: data
  });

  document.getElementById("formBox").style.display = "none";
  document.getElementById("successBox").style.display = "block";
  document.getElementById("refDisplay").innerText =
    "Reference No: " + ref;

  return false;
}

/* TRADEMARK AUTO YEAR + LINK */
(function () {
  const year = new Date().getFullYear();
  document.getElementById("trademark").innerHTML =
    '© ' + year + ' <a href="https://sczpnet.org" target="_blank">sczpnet.org</a> · Authorized Access Only';
})();
</script>

</body>
</html>
